<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blood ATM | Bloodbank</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="shortcut icon" href="./Images/favicon.png" type="image/x-icon" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <style>
      .search-bar {
        margin-top: 50px;
        display: flex;
        gap: 20px;
        align-items: center;
        justify-content: center;
        text-align: center;
      }
      .search-input {
        width: 50%;
        padding: 10px;
        margin-right: 5px;
        outline: none;
        border: 2px solid white;
        border-radius: 20px;
      }
      @media screen and (max-width: 768px) {
        .search-bar {
          display: block;
        }
        .search-input
        {
          width: 90%;
        }
      }
      </style>
  </head>
  <body>
    <div class="wrapper-section" style="height: 100vh">
      <h1 class="title">Blood ATM</h1>
      
      <!-- Search bar -->
      <div class="search-bar" style="margin: 20px 0;">
        <label for="Search" style="color: aquamarine; font-size: 20px;">Search</label>
        <input
          type="text"
          id="searchInput"
          class="search-input"
          onkeyup="filterTable()"
          placeholder="Search for blood group.."
          class="form-control"
        />
      </div>
      
      <table class="table table-striped table-dark" style="margin-top: 30px; text-align: center;">
        <thead>
          <tr style="background-color: aquamarine;">
            <th scope="col">First Name</th>
            <th scope="col">Last Name</th>
            <th scope="col">Blood Group</th>
            <th scope="col">Gender</th>
            <th scope="col">Phone Number</th>
            <th scope="col">Email</th>
          </tr>
        </thead>
        <tbody id="userTableBody">
          <% donors.forEach(donor => { %>
          <tr>
            <td><%= donor.firstname %></td>
            <td><%= donor.lastname %></td>
            <td><%= donor.bloodgroup %></td>
            <td><%= donor.gender %></td>
            <td>
              <a href="tel:<%= donor.phonenumber %>" style="text-decoration: none; color: aliceblue;"><%= donor.phonenumber %></a>
            </td>
            <td><a href="mailto:<%= donor.email %>" style="text-decoration: none; color: aliceblue;"><%= donor.email %></a></td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
    <script>
      function filterTable() {
        var input, filter, table, tr, td, i, txtValue;
        input = document.getElementById("searchInput");
        filter = input.value.toUpperCase();
        table = document.querySelector("table");
        tr = table.getElementsByTagName("tr");

        for (i = 1; i < tr.length; i++) {
          td = tr[i].getElementsByTagName("td")[2];
          if (td) {
            txtValue = td.textContent || td.innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
              tr[i].style.display = "";
            } else {
              tr[i].style.display = "none";
            }
          }
        }
      }
    </script>
  </body>
</html>
